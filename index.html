<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LEAF System Snapshot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --leaf:#43a419; }
    body{
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .glass{
      background: rgba(24,24,27,.78);
      backdrop-filter: blur(12px);
    }
    .soft-shadow{ box-shadow: 0 18px 45px rgba(0,0,0,.42); }
    .pop{ transition: transform .18s ease; }
    .pop:hover{ transform: translateY(-1px) scale(1.01); }
    summary::-webkit-details-marker{ display:none; }
    input[type="range"]{
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 32px;
      background: transparent;
      outline: none;
      position: relative;
      z-index: 3;
    }
    input[type="range"]::-webkit-slider-runnable-track{
      height: 12px;
      background: transparent;
      border-radius: 999px;
    }
    input[type="range"]::-moz-range-track{
      height: 12px;
      background: transparent;
      border-radius: 999px;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance: none;
      appearance: none;
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: var(--leaf);
      border: 2px solid rgba(0,0,0,.55);
      box-shadow: 0 12px 22px rgba(0,0,0,.45), 0 0 0 6px rgba(67,164,25,.12);
      cursor: pointer;
      margin-top: 1px;
      transform: translateZ(0);
    }
    input[type="range"]::-moz-range-thumb{
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: var(--leaf);
      border: 2px solid rgba(0,0,0,.55);
      box-shadow: 0 12px 22px rgba(0,0,0,.45), 0 0 0 6px rgba(67,164,25,.12);
      cursor: pointer;
      transform: translateZ(0);
    }
    .slider-wrap{ position: relative; padding-top: 6px; padding-bottom: 6px; }
    .range-band{
      position: absolute;
      left: 0; right: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      overflow: hidden;
      z-index: 1;
    }
    .range-band .fill{
      position: absolute;
      top: 0; bottom: 0; left: 0;
      width: 0%;
      border-radius: 999px;
      background: rgba(67,164,25,.18);
      z-index: 0;
      transition: width .06s linear;
    }
    .range-band .ok{
      position: absolute;
      top: 0; bottom: 0;
      left: 0%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg,
        rgba(67,164,25,.18),
        rgba(67,164,25,.55),
        rgba(67,164,25,.18)
      );
      border: 1px solid rgba(67,164,25,.55);
      box-shadow:
        0 0 0 1px rgba(0,0,0,.25) inset,
        0 0 16px rgba(67,164,25,.22);
      z-index: 2;
      pointer-events: none;
    }
    .range-band .marker{
      position: absolute;
      top: -6px;
      width: 0;
      height: 26px;
      border-left: 2px solid rgba(255,255,255,.75);
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.55));
      z-index: 3;
      pointer-events: none;
    }
    .range-band .marker::after{
      content:"";
      position:absolute;
      left:-6px;
      top:-2px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: var(--leaf);
      border: 2px solid rgba(0,0,0,.55);
      box-shadow: 0 10px 18px rgba(0,0,0,.40), 0 0 0 6px rgba(67,164,25,.10);
    }
    .band-label{
      font-size: 10px;
      color: rgba(255,255,255,.45);
      display:flex;
      justify-content: space-between;
      margin-top: 6px;
    }
    @keyframes softPop {
      0% { transform: scale(1); }
      40% { transform: scale(0.96); }
      100% { transform: scale(1); }
    }
    @keyframes thumbBounce {
      0% { transform: scale(1); }
      40% { transform: scale(0.90); }
      100% { transform: scale(1); }
    }
    @keyframes glowPulse {
      0% { box-shadow: 0 0 0 0 rgba(67,164,25,.00); }
      50% { box-shadow: 0 0 0 10px rgba(67,164,25,.14); }
      100% { box-shadow: 0 0 0 0 rgba(67,164,25,.00); }
    }
    .reset-pop { animation: softPop .22s ease; }
    .band-pulse { animation: glowPulse .28s ease; }
    input.thumb-bounce::-webkit-slider-thumb{ animation: thumbBounce .22s ease; }
    input.thumb-bounce::-moz-range-thumb{ animation: thumbBounce .22s ease; }
    .snap-scroll{
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .snap-scroll::-webkit-scrollbar{ display:none; }
    .snap-page{
      scroll-snap-align: center;
      width: 100%;
      flex: 0 0 100%;
    }
    .dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.22);
      border: 1px solid rgba(255,255,255,.18);
      transition: transform .15s ease, background .15s ease;
    }
    .dot.active{
      background: rgba(67,164,25,.95);
      border-color: rgba(67,164,25,.75);
      transform: scale(1.12);
    }
  </style>
</head>
<body class="bg-black text-white">
<div class="min-h-screen">
  <header class="sticky top-0 z-30 bg-black/70 border-b border-neutral-800 backdrop-blur">
    <div class="max-w-md mx-auto px-4 py-3 flex items-center justify-between">
      <div>
        <div class="text-sm font-semibold">LEAF System Snapshot</div>
        <div class="text-[11px] text-neutral-400">
          <span id="pageLabel">Snapshot 1 of 3</span>
        </div>
      </div>
      <div class="flex items-center gap-2" id="pager">
        <button class="dot active" aria-label="Go to snapshot 1" data-page="0"></button>
        <button class="dot" aria-label="Go to snapshot 2" data-page="1"></button>
        <button class="dot" aria-label="Go to snapshot 3" data-page="2"></button>
      </div>
    </div>
  </header>

  <div id="pages" class="snap-scroll overflow-x-auto flex">
    <!-- PAGE 1: Gas Furnace -->
    <div class="snap-page">
      <main class="leaf-page max-w-md mx-auto px-4 pt-5 pb-28 space-y-4">
        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="text-lg font-extrabold tracking-tight mb-1" data-el="heroSystemTitle">üî• HVAC ‚Ä¢ Gas Furnace</div>
          <div class="text-sm font-semibold text-neutral-200" data-el="heroSystemSubtitle">Direct-replacement high-efficiency upgrade</div>
          <div class="text-xs text-neutral-300 mt-1">LEAF provides ranges so you can evaluate contractor quotes with confidence.</div>
          <div class="flex flex-wrap gap-2 mt-3">
            <span data-el="heroSavingsPill" class="px-3 py-1 rounded-full bg-[var(--leaf)] text-black text-xs font-semibold">Save ~$22‚Äì$38/mo</span>
            <span class="px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 text-xs border border-emerald-500/30">~35‚Äì50% less CO‚ÇÇ</span>
          </div>
          <div class="text-[11px] text-neutral-400 mt-2">
            Note: higher-priced systems can increase savings slightly ‚Äî but ROI can drop if the added cost doesn‚Äôt pay back over time.
          </div>
        </section>

        <section class="glass rounded-3xl p-4 border border-red-500/30 soft-shadow pop">
          <div class="flex justify-between mb-3">
            <div class="text-sm font-semibold">üì∑ Current system</div>
            <span class="text-[11px] px-3 py-1 rounded-full bg-red-500/15 text-red-200 border border-red-500/25">Near end of life</span>
          </div>
          <div class="flex gap-3">
            <div class="w-24 h-24 rounded-3xl overflow-hidden border border-neutral-800">
              <img data-el="currentImg" src="https://media.istockphoto.com/id/528216623/photo/basement-old-heating.jpg?s=612x612&w=0&k=20&c=C2dbxazG_mm7dDHkhXAf02rKV3KfeA0B7UsmrEADcOM=" alt="Current system photo" class="w-full h-full object-cover" />
            </div>
            <div class="flex-1 text-xs space-y-1">
              <div class="font-semibold">Existing gas furnace (80% AFUE)</div>
              <div>Annual cost: <b>$380‚Äì$480</b></div>
              <div>Carbon: <b>3,600‚Äì4,200 lbs/yr</b></div>
            </div>
          </div>
        </section>

        <section class="glass rounded-3xl p-4 border border-[var(--leaf)]/35 soft-shadow pop">
          <div class="flex justify-between mb-3">
            <div class="text-sm font-semibold">‚ú® Recommended upgrade</div>
            <span class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">High efficiency</span>
          </div>
          <div class="flex gap-3">
            <div class="w-24 h-24 rounded-3xl overflow-hidden border border-neutral-800">
              <img data-el="upgradeImg" src="https://images.carriercms.com/image/upload/v1720013742/carrier/residential-hvac/people/dealer-inspecting-carrier-gas-furnaces-installed-in-a-garage.jpg" alt="Recommended upgrade photo" class="w-full h-full object-cover" />
            </div>
            <div class="flex-1 text-xs space-y-1">
              <div class="font-semibold" data-el="recommendedName">High-efficiency gas furnace (96-98% AFUE)</div>
              <div>Estimated yearly savings: <b>$190‚Äì$280</b></div>
              <div>Carbon: <b>1,500‚Äì2,200 lbs/yr</b></div>
            </div>
          </div>
        </section>

        <details class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <summary class="cursor-pointer">
            <div class="flex justify-between items-center">
              <div class="text-sm font-semibold">üí∞ Cost & savings range</div>
              <span class="text-[11px] text-neutral-400">Tap for details</span>
            </div>
            <div class="grid grid-cols-2 gap-2 text-xs mt-3">
              <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
                <div class="text-neutral-400">Install cost</div>
                <div class="text-lg font-bold" data-el="leafInstallRangeBox">$5,200‚Äì$7,800</div>
              </div>
              <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
                <div class="text-neutral-400">Monthly savings</div>
                <div class="text-lg font-bold" data-el="summarySavingsRange">$22‚Äì$38</div>
              </div>
            </div>
          </summary>
          <div class="mt-4 text-xs space-y-3">
            <div class="font-semibold">Cost bar (non-interactive)</div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="flex items-center justify-between">
                <div class="text-xs text-neutral-400">Your selected price</div>
                <div class="text-sm font-bold" data-el="staticPriceValue">$6,500</div>
              </div>
              <div class="mt-3 slider-wrap" style="padding-top:14px; padding-bottom:10px;">
                <div class="range-band" aria-hidden="true" data-el="staticCostTrack">
                  <div data-el="staticCostFill" class="fill"></div>
                  <div data-el="staticCostOK" class="ok"></div>
                  <div data-el="staticCostMarker" class="marker" style="left:0%;"></div>
                </div>
                <div class="band-label">
                  <span data-el="staticCostMinLabel">$5,200</span>
                  <span data-el="staticCostMaxLabel">$7,800</span>
                </div>
              </div>
              <div class="mt-2 text-[11px] text-neutral-400">
                LEAF range is highlighted. The marker shows your selected quote.
              </div>
            </div>
            <div class="font-semibold">Why it‚Äôs a range</div>
            <ul class="list-disc list-inside text-neutral-300 space-y-1">
              <li>Based on similar installs in comparable homes</li>
              <li>Accounts for typical labor, permits, and equipment size</li>
              <li>Premium options can slightly increase savings, but ROI may drop if cost climbs faster than savings</li>
              <li>Final scope can change due to ductwork/access/electrical needs</li>
            </ul>
          </div>
        </details>

        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-sm font-semibold">üéöÔ∏è Test your quote</div>
              <div class="text-[11px] text-neutral-400 mt-1">
                Slide the price. Savings bumps slightly with higher system cost ‚Äî but ROI can drop if price rises faster than savings.
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button data-el="resetBtn" class="text-[11px] px-3 py-1 rounded-full bg-neutral-900 border border-neutral-800 pop">
                Reset
              </button>
              <span data-el="overallBadge" class="text-[11px] px-3 py-1 rounded-md bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
                Looks good ‚úÖ
              </span>
            </div>
          </div>
          <div class="mt-4 rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
            <div class="flex items-center justify-between">
              <div class="text-xs text-neutral-400">Contractor price</div>
              <div class="flex items-center gap-2">
                <span data-el="costBadge" class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
                  Within range
                </span>
                <div class="text-sm font-bold" data-el="priceValue">$6,500</div>
              </div>
            </div>
            <div class="mt-3 slider-wrap">
              <div class="range-band" aria-hidden="true" data-el="priceBandTrack">
                <div data-el="priceBandFill" class="fill"></div>
                <div data-el="priceBandOK" class="ok"></div>
              </div>
              <input data-el="priceSlider" type="range" min="3200" max="14000" step="100" value="6500" />
              <div class="band-label">
                <span data-el="priceBandMinLabel">$5,200</span>
                <span data-el="priceBandMaxLabel">$7,800</span>
              </div>
            </div>
            <div class="mt-2 text-[11px] text-neutral-400">
              LEAF price range: <b data-el="leafInstallRangeInline">$5,200‚Äì$7,800</b>
            </div>
            <div class="mt-2 text-[11px] text-neutral-400">
              Estimated savings at this price: <b data-el="dynamicSavingsRange">$22‚Äì$38/mo</b>
            </div>
          </div>
          <div class="mt-3 rounded-2xl bg-black/30 border border-neutral-800 p-3">
            <div class="text-xs text-neutral-400">Quick read</div>
            <div class="text-sm font-semibold mt-1" data-el="overallHeadline">This looks like a solid deal.</div>
            <div class="mt-2 text-[11px] text-neutral-300">
              <div class="font-semibold text-neutral-200">Good questions to ask the contractor</div>
              <ul data-el="quickReadQuestionsVisible" class="list-disc list-inside mt-1 space-y-1"></ul>
            </div>
            <details class="mt-2">
              <summary class="cursor-pointer text-[11px] text-emerald-300">
                Why this message + more questions
              </summary>
              <div class="mt-2 text-[11px] text-neutral-300 space-y-3">
                <div>
                  <div class="font-semibold text-neutral-200">Why LEAF is saying this</div>
                  <ul data-el="quickReadWhy" class="list-disc list-inside mt-1 space-y-1"></ul>
                </div>
                <div>
                  <div class="font-semibold text-neutral-200">More questions (optional)</div>
                  <ul data-el="quickReadQuestionsMore" class="list-disc list-inside mt-1 space-y-1"></ul>
                </div>
              </div>
            </details>
          </div>
        </section>

        <details class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <summary class="cursor-pointer">
            <div class="flex justify-between items-center">
              <div class="text-sm font-semibold">üè∑Ô∏è Incentives & rebates</div>
              <span class="text-[11px] text-neutral-400">Tap for details</span>
            </div>
            <div class="mt-2 text-xs font-bold" data-el="incentivesSummary">$600‚Äì$3,200+ typical</div>
            <div class="text-[11px] text-neutral-400 mt-1">Federal ‚Ä¢ State ‚Ä¢ Utility</div>
          </summary>
          <div class="mt-4 space-y-3 text-xs">
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="font-semibold">üá∫üá∏ Federal</div>
              <div>Tax credit example: <b>30%</b> up to <b>$2,000</b></div>
              <div class="text-[11px] text-neutral-400 mt-1">Claimed by homeowner when filing taxes.</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="font-semibold">üèõÔ∏è State</div>
              <div>Program rebates often <b>$500‚Äì$1,500</b></div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="font-semibold">‚ö° Local / Utility</div>
              <div>Flat rebates typically <b>$200‚Äì$800</b></div>
            </div>
            <div class="text-[11px] text-neutral-400 mt-2">
              LEAF identifies likely incentives based on system type and location. Contractors confirm eligibility.
            </div>
          </div>
        </details>

        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="flex items-center justify-between">
            <div class="text-sm font-semibold">üß† Does this decision make sense?</div>
            <span data-el="decisionBadge" class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
              Likely yes ‚úÖ
            </span>
          </div>
          <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Install cost (slider)</div>
              <div class="text-base font-bold" data-el="msInstallCost">$6,500</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Estimated savings (at this price)</div>
              <div class="text-base font-bold" data-el="msSavingsRange">$22‚Äì$38/mo</div>
              <div class="text-[11px] text-neutral-400 mt-1">Higher cost can bump savings slightly, but ROI may drop.</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3 col-span-2">
              <div class="text-neutral-400">Estimated net cost (after incentives)</div>
              <div class="text-base font-bold" data-el="msNetCostRange">$3,300‚Äì$5,900</div>
              <div class="text-[11px] text-neutral-400 mt-1">
                Based on incentive estimates shown above (contractor confirms final eligibility).
              </div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Quote value check</div>
              <div class="text-base font-bold" data-el="msValueCheck">Within range ‚úÖ</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">What this means</div>
              <div class="text-[11px] text-neutral-300 mt-1" data-el="msMeaning">
                Quotes in-range usually indicate predictable scope + fair pricing.
              </div>
            </div>
          </div>
          <div class="mt-3 rounded-2xl bg-black/30 border border-neutral-800 p-3">
            <div class="text-xs text-neutral-400">Decision summary</div>
            <div class="text-sm font-semibold mt-1" data-el="msSummaryHeadline">This looks financially reasonable.</div>
            <div class="text-[11px] text-neutral-300 mt-1" data-el="msSummaryText">
              If the contractor quote lands within the LEAF range, this is typically a strong replacement decision.
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- PAGE 2: Water Heater -->
    <div class="snap-page">
      <main class="leaf-page max-w-md mx-auto px-4 pt-5 pb-28 space-y-4">
        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="text-lg font-extrabold tracking-tight mb-1" data-el="heroSystemTitle">üíß Water Heater ‚Ä¢ Gas Tank</div>
          <div class="text-sm font-semibold text-neutral-200" data-el="heroSystemSubtitle">High-efficiency replacement</div>
          <div class="text-xs text-neutral-300 mt-1">LEAF provides ranges so you can evaluate contractor quotes with confidence.</div>
          <div class="flex flex-wrap gap-2 mt-3">
            <span data-el="heroSavingsPill" class="px-3 py-1 rounded-full bg-[var(--leaf)] text-black text-xs font-semibold">Save ~$9‚Äì$17/mo</span>
            <span class="px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 text-xs border border-emerald-500/30">~30‚Äì45% less energy</span>
          </div>
          <div class="text-[11px] text-neutral-400 mt-2">
            Note: condensing models save more but may need venting upgrades.
          </div>
        </section>

        <section class="glass rounded-3xl p-4 border border-red-500/30 soft-shadow pop">
          <div class="flex justify-between mb-3">
            <div class="text-sm font-semibold">üì∑ Current system</div>
            <span class="text-[11px] px-3 py-1 rounded-full bg-red-500/15 text-red-200 border border-red-500/25">Inefficient / aging</span>
          </div>
          <div class="flex gap-3">
            <div class="w-24 h-24 rounded-3xl overflow-hidden border border-neutral-800">
              <img data-el="currentImg" src="https://apollohome.com/wp-content/uploads/2021/05/shutterstock_1209129.jpg" alt="Current system photo" class="w-full h-full object-cover" />
            </div>
            <div class="flex-1 text-xs space-y-1">
              <div class="font-semibold">Standard gas tank water heater</div>
              <div>Annual cost: <b>$340‚Äì$430</b></div>
              <div>Carbon: <b>2,900‚Äì3,600 lbs/yr</b></div>
            </div>
          </div>
        </section>

        <section class="glass rounded-3xl p-4 border border-[var(--leaf)]/35 soft-shadow pop">
          <div class="flex justify-between mb-3">
            <div class="text-sm font-semibold">‚ú® Recommended upgrade</div>
            <span class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">High efficiency</span>
          </div>
          <div class="flex gap-3">
            <div class="w-24 h-24 rounded-3xl overflow-hidden border border-neutral-800">
              <img data-el="upgradeImg" src="https://images.bannerbear.com/direct/4mGpW3zwpg0ZK0AxQw/requests/000/110/501/287/VJqEKwxkyzGDBwG46NP8dj4vL/78e8668d28513a260a8ea7ca5242d3e568973607.jpg" alt="Recommended upgrade photo" class="w-full h-full object-cover" />
            </div>
            <div class="flex-1 text-xs space-y-1">
              <div class="font-semibold" data-el="recommendedName">High-efficiency condensing gas tank</div>
              <div>Estimated yearly savings: <b>$110‚Äì$200</b></div>
              <div>Carbon: <b>1,800‚Äì2,500 lbs/yr</b></div>
            </div>
          </div>
        </section>

        <details class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <summary class="cursor-pointer">
            <div class="flex justify-between items-center">
              <div class="text-sm font-semibold">üí∞ Cost & savings range</div>
              <span class="text-[11px] text-neutral-400">Tap for details</span>
            </div>
            <div class="grid grid-cols-2 gap-2 text-xs mt-3">
              <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
                <div class="text-neutral-400">Install cost</div>
                <div class="text-lg font-bold" data-el="leafInstallRangeBox">$2,400‚Äì$4,100</div>
              </div>
              <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
                <div class="text-neutral-400">Monthly savings</div>
                <div class="text-lg font-bold" data-el="summarySavingsRange">$9‚Äì$17</div>
              </div>
            </div>
          </summary>
          <div class="mt-4 text-xs space-y-3">
            <div class="font-semibold">Cost bar (non-interactive)</div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="flex items-center justify-between">
                <div class="text-xs text-neutral-400">Your selected price</div>
                <div class="text-sm font-bold" data-el="staticPriceValue">$3,250</div>
              </div>
              <div class="mt-3 slider-wrap" style="padding-top:14px; padding-bottom:10px;">
                <div class="range-band" aria-hidden="true" data-el="staticCostTrack">
                  <div data-el="staticCostFill" class="fill"></div>
                  <div data-el="staticCostOK" class="ok"></div>
                  <div data-el="staticCostMarker" class="marker" style="left:0%;"></div>
                </div>
                <div class="band-label">
                  <span data-el="staticCostMinLabel">$2,400</span>
                  <span data-el="staticCostMaxLabel">$4,100</span>
                </div>
              </div>
              <div class="mt-2 text-[11px] text-neutral-400">
                LEAF range is highlighted. The marker shows your selected quote.
              </div>
            </div>
            <div class="font-semibold">Why it‚Äôs a range</div>
            <ul class="list-disc list-inside text-neutral-300 space-y-1">
              <li>Based on similar installs in comparable homes</li>
              <li>Accounts for typical labor, permits, and equipment size</li>
              <li>Premium options can slightly increase savings, but ROI may drop if cost climbs faster than savings</li>
              <li>Final scope can change due to venting/electrical needs</li>
            </ul>
          </div>
        </details>

        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-sm font-semibold">üéöÔ∏è Test your quote</div>
              <div class="text-[11px] text-neutral-400 mt-1">
                Slide the price. Savings bumps slightly with higher system cost ‚Äî but ROI can drop if price rises faster than savings.
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button data-el="resetBtn" class="text-[11px] px-3 py-1 rounded-full bg-neutral-900 border border-neutral-800 pop">
                Reset
              </button>
              <span data-el="overallBadge" class="text-[11px] px-3 py-1 rounded-md bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
                Looks good ‚úÖ
              </span>
            </div>
          </div>
          <div class="mt-4 rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
            <div class="flex items-center justify-between">
              <div class="text-xs text-neutral-400">Contractor price</div>
              <div class="flex items-center gap-2">
                <span data-el="costBadge" class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
                  Within range
                </span>
                <div class="text-sm font-bold" data-el="priceValue">$3,250</div>
              </div>
            </div>
            <div class="mt-3 slider-wrap">
              <div class="range-band" aria-hidden="true" data-el="priceBandTrack">
                <div data-el="priceBandFill" class="fill"></div>
                <div data-el="priceBandOK" class="ok"></div>
              </div>
              <input data-el="priceSlider" type="range" min="1400" max="8000" step="100" value="3250" />
              <div class="band-label">
                <span data-el="priceBandMinLabel">$2,400</span>
                <span data-el="priceBandMaxLabel">$4,100</span>
              </div>
            </div>
            <div class="mt-2 text-[11px] text-neutral-400">
              LEAF price range: <b data-el="leafInstallRangeInline">$2,400‚Äì$4,100</b>
            </div>
            <div class="mt-2 text-[11px] text-neutral-400">
              Estimated savings at this price: <b data-el="dynamicSavingsRange">$9‚Äì$17/mo</b>
            </div>
          </div>
          <div class="mt-3 rounded-2xl bg-black/30 border border-neutral-800 p-3">
            <div class="text-xs text-neutral-400">Quick read</div>
            <div class="text-sm font-semibold mt-1" data-el="overallHeadline">This looks like a solid deal.</div>
            <div class="mt-2 text-[11px] text-neutral-300">
              <div class="font-semibold text-neutral-200">Good questions to ask the contractor</div>
              <ul data-el="quickReadQuestionsVisible" class="list-disc list-inside mt-1 space-y-1"></ul>
            </div>
            <details class="mt-2">
              <summary class="cursor-pointer text-[11px] text-emerald-300">
                Why this message + more questions
              </summary>
              <div class="mt-2 text-[11px] text-neutral-300 space-y-3">
                <div>
                  <div class="font-semibold text-neutral-200">Why LEAF is saying this</div>
                  <ul data-el="quickReadWhy" class="list-disc list-inside mt-1 space-y-1"></ul>
                </div>
                <div>
                  <div class="font-semibold text-neutral-200">More questions (optional)</div>
                  <ul data-el="quickReadQuestionsMore" class="list-disc list-inside mt-1 space-y-1"></ul>
                </div>
              </div>
            </details>
          </div>
        </section>

        <details class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <summary class="cursor-pointer">
            <div class="flex justify-between items-center">
              <div class="text-sm font-semibold">üè∑Ô∏è Incentives & rebates</div>
              <span class="text-[11px] text-neutral-400">Tap for details</span>
            </div>
            <div class="mt-2 text-xs font-bold" data-el="incentivesSummary">$400‚Äì$1,400 typical</div>
            <div class="text-[11px] text-neutral-400 mt-1">Federal ‚Ä¢ State ‚Ä¢ Utility</div>
          </summary>
          <div class="mt-4 space-y-3 text-xs">
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="font-semibold">üá∫üá∏ Federal</div>
              <div>Tax credit example: <b>30%</b> up to <b>$600</b></div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="font-semibold">üèõÔ∏è State</div>
              <div>Program rebates often <b>$300‚Äì$800</b></div>
            </div>
            <div class="text-[11px] text-neutral-400 mt-2">
              LEAF identifies likely incentives based on system type and location. Contractors confirm eligibility.
            </div>
          </div>
        </details>

        <section class="glass rounded-3xl p-4 border border-neutral-800 soft-shadow pop">
          <div class="flex items-center justify-between">
            <div class="text-sm font-semibold">üß† Does this decision make sense?</div>
            <span data-el="decisionBadge" class="text-[11px] px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/30">
              Likely yes ‚úÖ
            </span>
          </div>
          <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Install cost (slider)</div>
              <div class="text-base font-bold" data-el="msInstallCost">$3,250</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Estimated savings (at this price)</div>
              <div class="text-base font-bold" data-el="msSavingsRange">$9‚Äì$17/mo</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3 col-span-2">
              <div class="text-neutral-400">Estimated net cost (after incentives)</div>
              <div class="text-base font-bold" data-el="msNetCostRange">$1,850‚Äì$2,850</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">Quote value check</div>
              <div class="text-base font-bold" data-el="msValueCheck">Within range ‚úÖ</div>
            </div>
            <div class="rounded-2xl bg-neutral-900 border border-neutral-800 p-3">
              <div class="text-neutral-400">What this means</div>
              <div class="text-[11px] text-neutral-300 mt-1" data-el="msMeaning">
                Quotes in-range usually indicate predictable scope + fair pricing.
              </div>
            </div>
          </div>
          <div class="mt-3 rounded-2xl bg-black/30 border border-neutral-800 p-3">
            <div class="text-xs text-neutral-400">Decision summary</div>
            <div class="text-sm font-semibold mt-1" data-el="msSummaryHeadline">This looks financially reasonable.</div>
            <div class="text-[11px] text-neutral-300 mt-1" data-el="msSummaryText">
              If the contractor quote lands within the LEAF range, this is typically a strong replacement decision.
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- PAGE 3: Windows (cloned & customized via JS) -->
    <div class="snap-page">
      <main class="leaf-page max-w-md mx-auto px-4 pt-5 pb-28 space-y-4"></main>
    </div>
  </div>

  <div class="fixed bottom-0 inset-x-0 bg-black/80 border-t border-neutral-800 backdrop-blur">
    <div class="max-w-md mx-auto px-4 py-3">
      <button class="w-full bg-[var(--leaf)] text-black font-semibold py-3 rounded-full text-sm pop">
        üîé Get an exact bid from a contractor
      </button>
      <div class="text-[11px] text-neutral-400 text-center mt-1">
        Compare the quote against your LEAF range
      </div>
    </div>
  </div>
</div>

<script>
  const pagesEl = document.getElementById("pages");
  const pagerEl = document.getElementById("pager");
  const dots = Array.from(pagerEl.querySelectorAll(".dot"));
  const pageLabel = document.getElementById("pageLabel");

  function setActiveDot(i){
    dots.forEach((d, idx) => d.classList.toggle("active", idx === i));
    pageLabel.textContent = `Snapshot ${i + 1} of ${dots.length}`;
  }

  function scrollToPage(i){
    const w = pagesEl.clientWidth;
    pagesEl.scrollTo({ left: i * w, behavior: "smooth" });
    setActiveDot(i);
  }

  pagerEl.addEventListener("click", (e) => {
    const btn = e.target.closest("[data-page]");
    if (btn) scrollToPage(Number(btn.dataset.page));
  });

  pagesEl.addEventListener("scroll", () => {
    const w = pagesEl.clientWidth || 1;
    const i = Math.round(pagesEl.scrollLeft / w);
    setActiveDot(Math.max(0, Math.min(dots.length - 1, i)));
  });

  const SNAPSHOTS = [
    {
      systemTitle: "üî• HVAC ‚Ä¢ Gas Furnace",
      systemSubtitle: "Direct-replacement high-efficiency upgrade",
      recommendedName: "High-efficiency gas furnace (96-98% AFUE)",
      currentImg: "https://media.istockphoto.com/id/528216623/photo/basement-old-heating.jpg?s=612x612&w=0&k=20&c=C2dbxazG_mm7dDHkhXAf02rKV3KfeA0B7UsmrEADcOM=",
      upgradeImg: "https://images.carriercms.com/image/upload/v1720013742/carrier/residential-hvac/people/dealer-inspecting-carrier-gas-furnaces-installed-in-a-garage.jpg",
      leafPriceMin: 5200,
      leafPriceMax: 7800,
      baseSavingsMin: 22,
      baseSavingsMax: 38,
      incentivesLow: 600,
      incentivesHigh: 3200
    },
    {
      systemTitle: "üíß Water Heater ‚Ä¢ Gas Tank",
      systemSubtitle: "High-efficiency replacement",
      recommendedName: "High-efficiency condensing gas tank",
      currentImg: "https://apollohome.com/wp-content/uploads/2021/05/shutterstock_1209129.jpg",
      upgradeImg: "https://images.bannerbear.com/direct/4mGpW3zwpg0ZK0AxQw/requests/000/110/501/287/VJqEKwxkyzGDBwG46NP8dj4vL/78e8668d28513a260a8ea7ca5242d3e568973607.jpg",
      leafPriceMin: 2400,
      leafPriceMax: 4100,
      baseSavingsMin: 9,
      baseSavingsMax: 17,
      incentivesLow: 400,
      incentivesHigh: 1400
    },
    {
      systemTitle: "ü™ü Windows ‚Ä¢ Mixed (8‚Äì12 units)",
      systemSubtitle: "Upgrade to ENERGY STAR certified",
      recommendedName: "Double/triple-pane low-E windows",
      currentImg: "https://www.thespruce.com/thmb/TvglDlWl7bqL4X1BV6sWtZyycfM=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/fogged-windows-repair-options-1822911-01-d133aa4013d9415693f696361a418d89.jpg",
      upgradeImg: "https://www.keystonewindow.com/wp-content/uploads/2024/04/double-vs-triple-pane-windows-cost-benefits-img-2-min-1024x683.jpg",
      leafPriceMin: 11000,
      leafPriceMax: 20500,
      baseSavingsMin: 30,
      baseSavingsMax: 62,
      incentivesLow: 0,
      incentivesHigh: 2800
    }
  ];

  const formatMoney = (n) => "$" + Math.round(n).toLocaleString("en-US");
  const clamp = (v, min, max) => Math.min(max, Math.max(min, v));

  function setBadge(el, tone, text){
    const tones = {
      good: "bg-emerald-500/15 text-emerald-200 border border-emerald-500/30",
      warn: "bg-yellow-500/15 text-yellow-200 border border-yellow-500/30",
      bad: "bg-red-500/15 text-red-200 border border-red-500/25",
      neutral: "bg-neutral-800/60 text-neutral-200 border border-neutral-700"
    };
    const isSquare = el.classList.contains("rounded-md");
    el.className = `text-[11px] px-3 py-1 ${isSquare ? "rounded-md" : "rounded-full"} ${tones[tone] || tones.neutral}`;
    el.textContent = text;
  }

  function setBand(okEl, sliderMin, sliderMax, okMin, okMax){
    const span = sliderMax - sliderMin;
    const L = ((okMin - sliderMin) / span) * 100;
    const R = ((okMax - sliderMin) / span) * 100;
    okEl.style.left = `${clamp(L, 0, 100)}%`;
    okEl.style.width = `${Math.max(0, clamp(R, 0, 100) - clamp(L, 0, 100))}%`;
  }

  function setFill(fillEl, sliderMin, sliderMax, value){
    const span = sliderMax - sliderMin;
    const pct = ((value - sliderMin) / span) * 100;
    fillEl.style.width = `${clamp(pct, 0, 100)}%`;
  }

  function setMarker(markerEl, sliderMin, sliderMax, value){
    const span = sliderMax - sliderMin;
    const pct = ((value - sliderMin) / span) * 100;
    markerEl.style.left = `${clamp(pct, 0, 100)}%`;
  }

  function computeNetCostRange(installCost, incentivesLow, incentivesHigh){
    const netLow = Math.max(0, installCost - incentivesHigh);
    const netHigh = Math.max(0, installCost - incentivesLow);
    return { netLow, netHigh };
  }

  function formatMoneyRange(a, b){
    return `${formatMoney(a)}‚Äì${formatMoney(b)}`;
  }

  function nudgeAnim(el, cls){
    if (!el) return;
    el.classList.remove(cls);
    void el.offsetWidth;
    el.classList.add(cls);
    setTimeout(() => el.classList.remove(cls), 320);
  }

  function thumbBounce(inputEl){
    if (!inputEl) return;
    inputEl.classList.remove("thumb-bounce");
    void inputEl.offsetWidth;
    inputEl.classList.add("thumb-bounce");
    setTimeout(() => inputEl.classList.remove("thumb-bounce"), 260);
  }

  function initLeafPage(root, pageIndex){
    const snap = SNAPSHOTS[pageIndex] || SNAPSHOTS[0];
    const LEAF_PRICE_MIN = snap.leafPriceMin;
    const LEAF_PRICE_MAX = snap.leafPriceMax;
    const BASE_SAVINGS_MIN = snap.baseSavingsMin;
    const BASE_SAVINGS_MAX = snap.baseSavingsMax;
    const INCENTIVES_LOW = snap.incentivesLow;
    const INCENTIVES_HIGH = snap.incentivesHigh;

    function dynamicSavingsRange(price){
      const over = Math.max(0, price - LEAF_PRICE_MAX);
      const steps = Math.floor(over / 1000);
      const bump = steps * 2;
      return { min: BASE_SAVINGS_MIN + bump, max: BASE_SAVINGS_MAX + bump };
    }

    function classifyCost(price){
      const COST_UNREALISTIC_BELOW = LEAF_PRICE_MIN - 500;
      const COST_OVERPRICED_ABOVE = LEAF_PRICE_MAX + 3000;
      if (price < COST_UNREALISTIC_BELOW) return "unreal_low";
      if (price < LEAF_PRICE_MIN) return "low";
      if (price > COST_OVERPRICED_ABOVE) return "over";
      if (price > LEAF_PRICE_MAX) return "likely_over";
      return "in";
    }

    const $ = (sel) => root.querySelector(sel);

    if ($('[data-el="currentImg"]')) $('[data-el="currentImg"]').src = snap.currentImg;
    if ($('[data-el="upgradeImg"]')) $('[data-el="upgradeImg"]').src = snap.upgradeImg;

    if ($('[data-el="heroSystemTitle"]')) $('[data-el="heroSystemTitle"]').textContent = snap.systemTitle;
    if ($('[data-el="heroSystemSubtitle"]')) $('[data-el="heroSystemSubtitle"]').textContent = snap.systemSubtitle;
    if ($('[data-el="recommendedName"]')) $('[data-el="recommendedName"]').textContent = snap.recommendedName;

    const installRangeText = `${formatMoney(LEAF_PRICE_MIN)}‚Äì${formatMoney(LEAF_PRICE_MAX)}`;
    if ($('[data-el="leafInstallRangeBox"]')) $('[data-el="leafInstallRangeBox"]').textContent = installRangeText;
    if ($('[data-el="leafInstallRangeInline"]')) $('[data-el="leafInstallRangeInline"]').textContent = installRangeText;

    const incentivesSummary = $('[data-el="incentivesSummary"]');
    if (incentivesSummary){
      if (INCENTIVES_LOW === 0 && INCENTIVES_HIGH === 0) incentivesSummary.textContent = `No incentives estimated`;
      else if (INCENTIVES_LOW === 0) incentivesSummary.textContent = `Up to ${formatMoney(INCENTIVES_HIGH)} typical`;
      else incentivesSummary.textContent = `${formatMoney(INCENTIVES_LOW)}‚Äì${formatMoney(INCENTIVES_HIGH)}+ typical`;
    }

    const priceSlider = $('[data-el="priceSlider"]');
    if (!priceSlider) return;

    const sliderMin = Math.max(0, LEAF_PRICE_MIN - 2000);
    const sliderMax = LEAF_PRICE_MAX + 8000;
    priceSlider.min = sliderMin;
    priceSlider.max = sliderMax;

    const leafMid = Math.round((LEAF_PRICE_MIN + LEAF_PRICE_MAX) / 2);
    priceSlider.value = leafMid;

    const priceValue = $('[data-el="priceValue"]');
    const staticPriceValue = $('[data-el="staticPriceValue"]');
    const costBadge = $('[data-el="costBadge"]');
    const overallBadge = $('[data-el="overallBadge"]');
    const overallHeadline = $('[data-el="overallHeadline"]');
    const quickReadWhy = $('[data-el="quickReadWhy"]');
    const qVisible = $('[data-el="quickReadQuestionsVisible"]');
    const qMore = $('[data-el="quickReadQuestionsMore"]');
    const decisionBadge = $('[data-el="decisionBadge"]');
    const priceBandOK = $('[data-el="priceBandOK"]');
    const priceBandFill = $('[data-el="priceBandFill"]');
    const priceBandMinLabel = $('[data-el="priceBandMinLabel"]');
    const priceBandMaxLabel = $('[data-el="priceBandMaxLabel"]');
    const dynSavings = $('[data-el="dynamicSavingsRange"]');
    const summarySavings = $('[data-el="summarySavingsRange"]');
    const heroSavingsPill = $('[data-el="heroSavingsPill"]');
    const msSavingsRange = $('[data-el="msSavingsRange"]');
    const msInstallCost = $('[data-el="msInstallCost"]');
    const msNetCostRange = $('[data-el="msNetCostRange"]');
    const msValueCheck = $('[data-el="msValueCheck"]');
    const msMeaning = $('[data-el="msMeaning"]');
    const msSummaryHeadline = $('[data-el="msSummaryHeadline"]');
    const msSummaryText = $('[data-el="msSummaryText"]');
    const resetBtn = $('[data-el="resetBtn"]');
    const priceBandTrack = $('[data-el="priceBandTrack"]');
    const staticCostFill = $('[data-el="staticCostFill"]');
    const staticCostOK = $('[data-el="staticCostOK"]');
    const staticCostMarker = $('[data-el="staticCostMarker"]');
    const staticCostMinLabel = $('[data-el="staticCostMinLabel"]');
    const staticCostMaxLabel = $('[data-el="staticCostMaxLabel"]');

    const renderList = (el, items) => {
      if (!el) return;
      el.innerHTML = (items || []).map(t => `<li>${t}</li>`).join("");
    };

    function quickReadMessage(costClass){
      const premiumWhy = [
        "More expensive systems can provide slightly higher savings (better efficiency/controls/commissioning) ‚Äî usually incremental.",
        "ROI can drop when cost climbs faster than savings. A premium quote should come with clear, measurable value."
      ];
      if (costClass === "unreal_low"){
        return {
          tone: "warn",
          headline: "This price is extremely low ‚Äî verify scope before scheduling.",
          why: [
            "Very low pricing often means partial scope or missing line items.",
            "Confirming scope protects you from surprise add-ons later."
          ],
          qVisible: [
            "Is this a full replacement quote (equipment, labor, permits, startup/commissioning)?",
            "What‚Äôs excluded that could be added later (venting, thermostat, disposal, permits)?"
          ],
          qMore: [
            "Can you itemize model numbers + warranty terms in writing?",
            "Is there any scenario where price changes after work begins?"
          ]
        };
      }
      if (costClass === "low"){
        return {
          tone: "good",
          headline: "Competitive quote ‚Äî great sign if scope is complete.",
          why: [
            "Competitive bids happen and can be a win for the homeowner.",
            "A quick scope check ensures it‚Äôs apples-to-apples."
          ],
          qVisible: [
            "Can you walk me through exactly what‚Äôs included in this price?",
            "Are permits/inspections and commissioning included?"
          ],
          qMore: [
            "Is the thermostat included? What about haul-away/disposal?",
            "Can you confirm final scope and model numbers in writing?"
          ]
        };
      }
      if (costClass === "in"){
        return {
          tone: "good",
          headline: "This looks like a fair, in-range quote.",
          why: [
            "Pricing aligns with what LEAF typically sees for this replacement category.",
            "In-range quotes usually indicate predictable scope and fewer surprises."
          ],
          qVisible: [
            "What‚Äôs the install timeline and what prep do you need from me?",
            "What warranty coverage comes with the equipment and labor?"
          ],
          qMore: [
            "Do you handle permits and inspection sign-off?",
            "What maintenance keeps performance strong long-term?"
          ]
        };
      }
      if (costClass === "likely_over"){
        return {
          tone: "warn",
          headline: "Higher than LEAF range ‚Äî confirm what‚Äôs driving the price.",
          why: [
            "Higher quotes can be justified by site conditions (access, venting, ductwork, electrical).",
            "It can also reflect premium add-ons you may not need.",
            ...premiumWhy
          ],
          qVisible: [
            "What specifically is driving the price above typical range?",
            "Is there a simpler option that still meets the goals?"
          ],
          qMore: [
            "Can you provide an itemized quote so I can compare bids accurately?",
            "Which add-ons are optional vs required?"
          ]
        };
      }
      return {
        tone: "warn",
        headline: "Major caution ‚Äî this looks overpriced for the category.",
        why: [
          "This is significantly above typical replacement pricing.",
          "Before committing, compare at least one more itemized bid.",
          ...premiumWhy
        ],
        qVisible: [
          "Can you itemize the quote (equipment, labor, permits, extras) line-by-line?",
          "What would the ‚Äòstandard replacement‚Äô option cost and what changes?"
        ],
        qMore: [
          "Are there scope items here that belong in a separate project (duct redesign, electrical upgrades)?",
          "Can you confirm model numbers and efficiency details to justify pricing?"
        ]
      };
    }

    function updateUI(){
      const price = Number(priceSlider.value);
      if (priceValue) priceValue.textContent = formatMoney(price);
      if (staticPriceValue) staticPriceValue.textContent = formatMoney(price);
      if (msInstallCost) msInstallCost.textContent = formatMoney(price);
      const dyn = dynamicSavingsRange(price);
      const savText = `$${dyn.min}‚Äì$${dyn.max}/mo`;
      if (dynSavings) dynSavings.textContent = savText;
      if (summarySavings) summarySavings.textContent = `$${dyn.min}‚Äì$${dyn.max}`;
      if (heroSavingsPill) heroSavingsPill.textContent = `Save ~$${dyn.min}‚Äì$${dyn.max}/mo`;
      if (msSavingsRange) msSavingsRange.textContent = savText;
      if (priceBandMinLabel) priceBandMinLabel.textContent = formatMoney(LEAF_PRICE_MIN);
      if (priceBandMaxLabel) priceBandMaxLabel.textContent = formatMoney(LEAF_PRICE_MAX);
      if (priceBandOK) setBand(priceBandOK, Number(priceSlider.min), Number(priceSlider.max), LEAF_PRICE_MIN, LEAF_PRICE_MAX);
      if (priceBandFill) setFill(priceBandFill, Number(priceSlider.min), Number(priceSlider.max), price);
      if (staticCostMinLabel) staticCostMinLabel.textContent = formatMoney(LEAF_PRICE_MIN);
      if (staticCostMaxLabel) staticCostMaxLabel.textContent = formatMoney(LEAF_PRICE_MAX);
      if (staticCostOK) setBand(staticCostOK, Number(priceSlider.min), Number(priceSlider.max), LEAF_PRICE_MIN, LEAF_PRICE_MAX);
      if (staticCostFill) setFill(staticCostFill, Number(priceSlider.min), Number(priceSlider.max), price);
      if (staticCostMarker) setMarker(staticCostMarker, Number(priceSlider.min), Number(priceSlider.max), price);
      const costClass = classifyCost(price);
      if (costBadge){
        if (costClass === "unreal_low") setBadge(costBadge, "bad", "Unrealistic");
        else if (costClass === "low") setBadge(costBadge, "warn", "Low (verify scope)");
        else if (costClass === "over") setBadge(costBadge, "bad", "Overpriced");
        else if (costClass === "likely_over") setBadge(costBadge, "warn", "Likely overpriced");
        else setBadge(costBadge, "good", "Within range");
      }
      const msg = quickReadMessage(costClass);
      if (overallBadge){
        if (costClass === "over") setBadge(overallBadge, "bad", "Major caution üö©");
        else if (msg.tone === "good") setBadge(overallBadge, "good", "Looks good ‚úÖ");
        else setBadge(overallBadge, "warn", "Proceed smart ‚ö†Ô∏è");
      }
      if (overallHeadline) overallHeadline.textContent = msg.headline;
      renderList(quickReadWhy, msg.why);
      renderList(qVisible, msg.qVisible);
      renderList(qMore, msg.qMore);
      const net = computeNetCostRange(price, INCENTIVES_LOW, INCENTIVES_HIGH);
      const netMin = Math.min(net.netLow, net.netHigh);
      const netMax = Math.max(net.netLow, net.netHigh);
      if (msNetCostRange) msNetCostRange.textContent = formatMoneyRange(netMin, netMax);
      if (msValueCheck && msMeaning){
        if (costClass === "in"){
          msValueCheck.textContent = "Within range ‚úÖ";
          msMeaning.textContent = "Quotes in-range usually indicate predictable scope + fair pricing.";
        } else if (costClass === "low"){
          msValueCheck.textContent = "Below range ‚ö†Ô∏è";
          msMeaning.textContent = "Could be a great deal ‚Äî just confirm it‚Äôs a full scope replacement quote.";
        } else if (costClass === "unreal_low"){
          msValueCheck.textContent = "Very low üö©";
          msMeaning.textContent = "High chance something is missing. Get scope in writing before scheduling.";
        } else if (costClass === "likely_over"){
          msValueCheck.textContent = "Above range ‚ö†Ô∏è";
          msMeaning.textContent = "Premium cost can bump savings slightly, but ROI may drop. Ask what justifies the cost.";
        } else {
          msValueCheck.textContent = "Far above range üö©";
          msMeaning.textContent = "This is likely overpriced. Compare another itemized bid before committing.";
        }
      }
      if (decisionBadge && msSummaryHeadline && msSummaryText){
        if (costClass === "over"){
          setBadge(decisionBadge, "bad", "Unclear üö©");
          msSummaryHeadline.textContent = "This needs a closer look.";
          msSummaryText.textContent =
            "The quote is well above typical range. Request an itemized scope and compare at least one more bid.";
        } else if (costClass === "in"){
          setBadge(decisionBadge, "good", "Likely yes ‚úÖ");
          msSummaryHeadline.textContent = "This looks financially reasonable.";
          msSummaryText.textContent =
            "If the contractor quote lands within the LEAF range, this is typically a strong replacement decision.";
        } else {
          setBadge(decisionBadge, "warn", "Likely yes (with clarity) ‚ö†Ô∏è");
          msSummaryHeadline.textContent = "This can still make sense ‚Äî confirm a few details.";
          msSummaryText.textContent =
            "Use the questions above to confirm scope and what‚Äôs driving price. Premium cost can bump savings slightly, but ROI often drops if price rises too fast.";
        }
      }
    }

    function resetToLeafMid(){
      const mid = Math.round((LEAF_PRICE_MIN + LEAF_PRICE_MAX) / 2);
      if (navigator.vibrate) navigator.vibrate([10]);
      priceSlider.value = mid;
      thumbBounce(priceSlider);
      if (resetBtn) nudgeAnim(resetBtn, "reset-pop");
      if (priceBandTrack) nudgeAnim(priceBandTrack, "band-pulse");
      updateUI();
    }

    priceSlider.addEventListener("input", updateUI);
    if (resetBtn) resetBtn.addEventListener("click", resetToLeafMid);
    updateUI();
  }

  const leafPages = Array.from(document.querySelectorAll(".leaf-page"));
  if (leafPages.length >= 3 && leafPages[2].children.length === 0){
    leafPages[2].innerHTML = leafPages[0].innerHTML;  // Clone page 1 content for page 3 (Windows)
  }

  const pages = Array.from(document.querySelectorAll(".leaf-page"));
  pages.forEach((page, idx) => initLeafPage(page, idx));

  setActiveDot(0);

  window.addEventListener("resize", () => {
    const i = dots.findIndex(d => d.classList.contains("active"));
    scrollToPage(Math.max(0, i));
  });
</script>
</body>
</html>
